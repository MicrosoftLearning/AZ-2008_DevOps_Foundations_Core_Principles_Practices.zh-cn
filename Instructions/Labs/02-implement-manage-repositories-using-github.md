---
lab:
  title: 使用 GitHub 实现工作流
  module: Develop with DevOps
---

# 实验室 02 - 使用 GitHub 实现工作流

## 预计用时：30 分钟

## 场景

回忆一下本模块中的以下场景：你为零售行业的一家软件开发公司工作，该公司正计划将在线商店从旧应用迁移到名为 eShopOnWeb 的新应用。 由于你已决定使用 Git 和 GitHub 来为应用程序生命周期管理提供便利，因此，本实验室提供了机会来让你从以下操作开始：创建现有存储库的分支、配置存储库、创建问题、创建分支、更新分支中的文件、创建和合并拉取请求、关闭问题，以及验证更改。

## 目标

在此实验中，将执行以下操作：

- 使用 GitHub 实施和管理存储库

> **注意：** 对于此实验室和后续实验室，请使用为第一个实验室创建的同一 GitHub 帐户。

## 先决条件

- 已完成的[实验室 01 - 使用 GitHub 进行敏捷规划和管理](01-agile-planning-management-using-github.md)

## 练习 1：使用 GitHub 实施和管理存储库

在本练习中，你将使用 GitHub 创建一个 Git 存储库分支并对其进行管理。

> **重要提示：** 用于拉取请求功能的 GitHub Copilot 是完全可选的。 若要使用此功能，你必须是具有 **Copilot Enterprise 订阅**的企业的成员。 如果无权访问拉取请求功能，可以跳过涉及 GitHub Copilot 的拉取请求功能的步骤。 若要详细了解 GitHub Copilot 拉取请求功能，请参阅《[关于 Copilot 拉取请求摘要](https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-pull-request-summaries/about-copilot-pull-request-summaries)》。

> **注意：** 我们在课程的第一个实验室中创建了一个新的存储库。 在此实验室中，首先创建现有存储库的分支。 分支是一个存储库，它与现有的上游存储库共享代码和可见性设置。 在开发对开放源代码项目的更新时或在对上游存储库的写入访问权限不可用的情况下，通常会使用此方法。 有关更多详细信息，请参阅《[使用分支](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/working-with-forks)》。

该练习由以下任务组成：

- 任务 1：为 GitHub 存储库创建分支
- 任务 2：配置 GitHub 存储库
- 任务 3：创建问题
- 任务 4：创建分支
- 任务 5：更新分支中的文件
- 任务 6：创建并合并拉取请求
- 任务 7：关闭该问题
- 任务 8：验证变更

### 任务 1：为 GitHub 存储库创建分支

1. 启动 Web 浏览器并导航到 [GitHub](https://github.com) 主页。
1. 当系统提示进行身份验证时，使用 GitHub 用户帐户登录。
1. 在同一浏览器窗口中，打开另一个标签页，并导航到 [Spoon-Knife](https://github.com/octocat/Spoon-Knife) 存储库。
1. 在 **Spoon-Knife** 存储库页上，选择“**分支**”。
1. 在“**创建新分支**”页上，确保“**所有者**”下拉列表条目显示你的 GitHub 用户名，接受“**存储库名称**”文本框中的默认条目“**Spoon-Knife**”，保持“**仅复制主分支**”复选框处于启用状态，然后选择“**创建分支**”。

   > **注意：** 系统会将浏览器会话自动重定向到新创建的分支存储库。

### 任务 2：配置 GitHub 存储库

1. 在创建的 **Spoon-Knife** 存储库分支页上，在工具栏中选择“**设置**”。
1. 在“**设置**”选项卡的“**常规**”部分中，请注意，默认分支设置为 **主要*。
1. 导航到“**常规**”部分的“**功能**”区域，并启用“**问题**”复选框。
1. 在左侧导航菜单中，在“**代码和自动化**”分组中，选择“**页面**”条目。
1. 在 **GitHub Pages** 窗格中的“分支”部分中，将下拉列表中的“**无**”条目更改为“**主要**”，然后选择“**保存**”。

   > **注意：** GitHub Pages 将自动将存储库的内容发布到可通过 URL `https://<your_GitHub_username>.github.io/Spoon-Knife/` 访问的网站。

1. 在 **GitHub Pages** 窗格中，选择“**访问站点**”按钮。 这将自动打开另一个 Web 浏览器选项卡，并显示表示index.html 文件的当前内容的页面。

   > **注意：** 你可能需要等待几分钟，然后才能使用“**访问网站**”按钮和相应页面。

   > **注意：** 如果已完成第一个实验室，请执行此任务的剩余步骤。

1. 返回已创建的 **Spoon-Knife** 存储库分支页面，在工具栏中选择“**项目**”。
1. 在“**欢迎使用全新项目**”窗格中，选择“**链接项目**”，然后在下拉菜单中选择“**链接现有项目**”。
1. 在现有项目的列表中，选择“**DevOps Core 简介项目**”。

### 任务 3：创建问题

1. 在已创建的 **Spoon-Knife** 分支页面上，选择“**问题**”。
1. 在“**欢迎使用问题**！” 页面上，选择“**新建问题**”。
1. 在“**添加标题**”文本框中，输入 **`index.html looks rather austere`**。
1. 在“**添加说明**”文本框中，输入**`index.html file can use a modern touch`**。
1. 在当前窗格的“分配者”部分，选择“**添加分配者…**”，然后在“**建议**”部分中，选择 GitHub 用户名。
1. 选择“**标签**”条目旁边的齿轮图标，然后在下拉列表中选择“**增强**”。
1. 选择“**项目**”条目旁边的齿轮图标，然后在下拉列表中选择“**DevOps Core 简介项目**”。
1. 选择“提交新问题”****。
1. 在“**index.html 看起来相当紧缩**”窗格中，在“**项目**”部分中，将“**状态**”设置为“**正在进行**”。
1. 在已创建的 **Spoon-Knife** 分支页面上，选择“**项目**”选项卡。
1. 在“**欢迎使用全新项目**”页上，选择“**DevOps Core 简介项目**”。
1. 在“**DevOps Core 简介项目**”的开发板视图中，查看“**正在进行**”列，并注意它包含新创建的问题。

### 任务 4：创建分支

1. 切换回到“**代码**”选项卡。
1. 在页面左上角，选择“**主要**”条目以显示“**切换分支/标记**”下拉列表。
1. 在“**查找或创建分支...**”文本框中，输入 **`update index.html`**，然后选择“**创建分支：从‘main’更新 index.html**”条目以创建新分支。

   > **注意：** 这会自动使新创建的分支成为当前分支，如下拉列表的内容所示。

### 任务 5：更新分支中的文件

1. 在已创建的 **Spoon-Knife** 存储库分支页上，在文件列表中，选择“**index.html**”。
1. 在 **Spoon-Knife/index.html** 页上，在代码编辑器工具栏的右侧，选择铅笔图标以切换到编辑器模式。
1. 在编辑器窗格中，将页面（第 12-17 行）的整个正文元素替换为以下 HTML 代码：

   ```html
   <div id="octocat">
     <img src="https://octodex.github.com/images/NUX_Octodex.gif" alt="Octocat Image">
   </div>

   <p>
     Ready to team up? Let's collaborate, @octocat!
   </p>
   ```

1. 在编辑器页面的右上角选择“**提交更改…**”。
1. 在“**提交更改**”窗口中，在“**扩展说明**”文本框中，输入 **`Modified the image and paragraph text`**，接受默认提交消息，然后选择“**提交更改**”。

   > **注意：** 你还可以选择此时为提交创建新分支。

1. 在左侧存储库文件的列表中，选择 **styles.css**。
1. 在 **Spoon-Knife/styles.css** 页上，在代码编辑器工具栏的右侧，选择铅笔图标以切换到编辑器模式。
1. 在编辑器窗格中，将第 17 行替换为以下整个 HTML 代码：

   ```css
     color: #333;
     line-height: 1.5;
     text-align: center;
   }

   body {
     font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
     background-color: #f8f9fa;
   }

   #octocat img {
     display: block;
     width: 100%;
     height: auto;
   }
   ```

1. 在编辑器页面的右上角选择“**提交更改…**”。
1. 在“**提交更改**”窗口中，在“**扩展说明**”文本框中，输入 **`Modified CSS tags and selectors`**，接受默认提交消息，然后选择“**提交更改**”以提交对 update-index.html 分支的更改。

### 任务 6：创建并合并拉取请求

1. 导航回已创建的 **Spoon-Knife** 存储库分支页。
1. 确保当前正在查看 **update-index.html** 分支，如页面左上角的下拉列表中显示的标签所示。 如果该标签显示“**主要**”，请先选择它，然后在包含分支列表的下拉列表中选择 **update-index.html**。
1. 在已创建的 **Spoon-Knife** 存储库分支页上，选择“**参与**”，然后选择“**打开拉取请求**”。
1. 在“**打开拉取请求**”页上，选择条目“**基本存储库：octocat/Spoon-Knife**”。
1. 在“**选择基础存储库**”下拉列表中，选择在本实验室开头创建的存储库分支的名称。

   > **注意：** 该名称以 GitHub 名称开头，后跟正斜杠，然后是 **Spoon-Knife**。 选择后，条目应会更改为“**基数：主要**”。

   > **注意：** 这是必要的，因为我们希望更新存储库分支中的主分支，而不是从中创建分支的存储库中的主分支。

1. 在“**添加标题**”文本框中，将“**更新 index.html**”替换为“**更新 index.html 和styles.css**”。

1. （可选）如果你有权访问 GitHub Copilot 以获取拉取请求功能，请在“**添加说明**”文本框中，单击“**Copilot 操作**”按钮，然后选择“**摘要**”（生成拉取请求中更改的摘要）。

   1. 用于拉取请求功能的 GitHub Copilot 将生成拉取请求中更改的摘要。

       ![用于拉取请求功能的 GitHub Copilot](media/github-pull-request-action.png)

   1. 查看 GitHub Copilot 为拉取请求功能生成的摘要。

   1. 生成摘要后，在第一行的“**添加说明**”中输入 **`Addressing #1`**，然后选择“**创建拉取请求**”。

       ![GitHub Copilot 摘要](media/github-pull-request-copilot-summary.png)

   > **注意：** 如果无权访问 GitHub Copilot 拉取请求功能，可以跳过此步骤。

   > **注意：** 如果选择将 GitHub Copilot 用于拉取请求功能，可以跳过下一步骤。

1. 在“**添加说明**”文本框中，输入 **`Addressing #1`**，然后选择“**创建拉取请求**”。

   > **注意：** 通过添加“**#1**”，你可以引用与此拉取请求关联的第一个问题。

1. 验证当前分支与基分支没有冲突，选择“**合并拉取请求**”，然后选择“**确认合并**”。
1. 验证拉取请求是否已成功合并并关闭，然后选择“**删除分支**”。

### 任务 7：关闭该问题

1. 在 GitHub 页面的工具栏中，选择“**问题**”选项卡。
1. 选中第一个问题“**index.html 看起来相当紧缩**”左侧的复选框，选择“**标记为**”，然后在下拉列表中选择“**已关闭**”。
1. 导航回到“**DevOps Core 简介项目**”的板视图，并注意问题现在显示在“**已完成**”列。

### 任务 8：验证变更

1. 在 Web 浏览器窗口中，导航回已创建的 **Spoon-Knife** 存储库分支页，选择“**设置**”选项卡，然后在左侧导航菜单中，在“**代码和自动化**”分组中，选择“**页面**”以显示 **GitHub Pages** 窗格。
1. 在 **GitHub Pages** 窗格中，选择“**访问站点** ”打开另一个浏览器选项卡，其中显示了 index.html 文件的更新内容。
1. 验证页面是否已更新，并包含 HTML 和 CSS 文件中引用的视觉元素。

> **注意：** 此时，你可能会将分支中对主分支的更改提交回原始存储库。 在开发更新和协作处理开源项目时，这通常是下一步。 但是，由于原始存储库未维护，因此此步骤在此处不适用。
